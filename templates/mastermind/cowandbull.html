<!-- –°—Ç—Ä–∞–Ω–∏—á–∫–∞ –∏–≥—Ä—ã –ö–û–†–û–í - –ë–´–ö–û–í —Å –∫–æ–ª–æ–Ω–∫–æ–π –∏–≥—Ä—ã –∏ –∫–æ–ª–æ–Ω–∫–æ–π —Å–µ–º–µ–π–Ω–æ–≥–æ —á–∞—Ç–∞ -->
 
{% extends 'base.html' %}
{% load static %}
   
{% block content %}


<div class="container-fluid"> <!-- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã -->
  <div class="row"> <!-- –û–°–ù–û–í–ù–ê–Ø —Å—Ç—Ä–æ–∫–∞-->
    <!-- *** –ö–æ–ª–æ–Ω–∫–∞ –∏–≥—Ä—ã --- –ö–æ–ª–æ–Ω–∫–∞ –∏–≥—Ä—ã --- –ö–æ–ª–æ–Ω–∫–∞ –∏–≥—Ä—ã --- –ö–æ–ª–æ–Ω–∫–∞ –∏–≥—Ä—ã --- –ö–æ–ª–æ–Ω–∫–∞ –∏–≥—Ä—ã *** -->
    <div class="col-12 col-md-8 game-column"> <!-- –ö–æ–ª–æ–Ω–∫–∞ –∏–≥—Ä—ã-->    
      <!--<div class="table-game">  —á—Ç–æ–±—ã —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∞—Å—å –ø–æ—Å–ª–µ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è   -->
      <div class="table-game"  >     

        <div class="container mt-5">
          <h1>–ò–≥—Ä–∞ –≤ "–ö–û–†–û–í-–ë–´–ö–û–í" <button type="button" class="btn btn-primary" id ='openModalButton'  > –ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É</button></h1> 
          <h4>–ó–∞–≥–∞–¥–∞–Ω–æ —á–∏—Å–ª–æ –∏–∑ : <span id="selectedNumber"></span> —Ü–∏—Ñ—Ä. –í–∞–º –Ω—É–∂–Ω–æ –∏—Ö –æ—Ç–≥–∞–¥–∞—Ç—å.</h4>
          <h4>–í –ø–æ–¥–±–∏—Ä–∞–µ–º–æ–º —á–∏—Å–ª–µ –Ω–µ–ª—å–∑—è –ø—Ä–æ–ø–∏—Å–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ü–∏—Ñ—Ä—ã</h4>
          <h4>"–ö–æ—Ä–æ–≤—ã" - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏—Ñ—Ä —É–≥–∞–¥–∞–Ω–Ω—ã—Ö, –Ω–æ –Ω–µ –Ω–∞ —Å–≤–æ–µ–º –º–µ—Å—Ç–µ</h4>
          <h4>"–ë—ã–∫–∏" - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏—Ñ—Ä —É–≥–∞–¥–∞–Ω–Ω—ã—Ö –∏ –Ω–∞ —Å–≤–æ–µ–º –º–µ—Å—Ç–µ.</h4>    
        </div>        
                
        <div class="table-row">
          <div class="table-col">–ß–ò–°–õ–û</div>
          <div class="table-col">
            <img class = "cow-bull-image" src="{% static 'img/system/cow.png' %}" alt = 'cow'> /  
            <img class = "cow-bull-image" src="{% static 'img/system/bull.png' %}" alt = 'bull'>
          </div>
          <div class="table-col">–®–ê–ì</div>
        </div>

        <!-- ***  –ó–¥–µ—Å—å —Å—Ç—Ä–æ–∏—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞ –∏–≥—Ä—ã –ö–û–†–û–í –ë–´–ö–û–í  ***
          
          —Ñ—É–Ω–∫—Ü–∏–µ–π function addRow(id,userNUM, cowBull)
          let divTableInteractive = document.getElementById("div-table-interactive")
           ...
          divTableInteractive.insertAdjacentElement('beforebegin', divRow);

        -->
                  
        <div class="table-row " id = "div-table-interactive">
          <div class="table-col align-left">
            <input id="userInput" autocomplete="off" class="table-input" aria-label="userInput">
          </div>
          <div class="table-col">
          <span id = 'timetext'> </span> <span id = 'time'></span>  
          </div>
          <div class="table-col">
            <button class="btn btn-primary" onclick="cowBullUserTry(); return false;">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
          </div>
        </div>
                
      </div> <!-- /div class="table-game"-->
    </div> <!-- /div class="col-12 col-md-8 game-column"-->
    <!-- ***–ö–û–ù–ï–¶ –ö–æ–ª–æ–Ω–∫–∞ –∏–≥—Ä—ã --- –ö–æ–ª–æ–Ω–∫–∞ –∏–≥—Ä—ã --- –ö–æ–ª–æ–Ω–∫–∞ –∏–≥—Ä—ã --- –ö–æ–ª–æ–Ω–∫–∞ –∏–≥—Ä—ã --- –ö–æ–ª–æ–Ω–∫–∞ –∏–≥—Ä—ã *** -->



    <!-- *** –ö–æ–ª–æ–Ω–∫–∞ —á–∞—Ç–∞ --- –ö–æ–ª–æ–Ω–∫–∞ —á–∞—Ç–∞ --- –ö–æ–ª–æ–Ω–∫–∞ —á–∞—Ç–∞ --- –ö–æ–ª–æ–Ω–∫–∞ —á–∞—Ç–∞ --- –ö–æ–ª–æ–Ω–∫–∞ —á–∞—Ç–∞ ***  -->
    <div class="col-12 col-md-4"> <!-- –ö–æ–ª–æ–Ω–∫–∞ —á–∞—Ç–∞-->
      <div class="container-fluid vh-100 d-flex flex-column">

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞ -->
        <div class="row py-3  border-bottom " style='background-color: blsck;' >
          <div class="col d-flex align-items-center">
            <h4 class="mb-0">–°–µ–º–µ–π–Ω—ã–π —á–∞—Ç–∏–∫</h4>
          </div>
        </div>
      
        <!-- –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π -->
        <div class="row flex-grow-1 overflow-y-auto" style="background-color: black;"> <!-- –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π -->
          <div class="col py-3" style="background-color: black;" id = "div-all-messages-in-chat">
            
            <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->  
            {% for message in messages %}
            
            <!-- –û–±–ª–∞—Å—Ç—å –ê–í–ê–¢–ê–† –∏ –°–û–û–ë–©–ï–ù–ò–ï-->
              <!-- –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Ç–µ–∫—É—â–ï–ú–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–Æ, —Ç–æ –∞–≤–∞—Ç–∞—Ä –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—ã–¥–µ–ª—è—é—Ç—Å—è —Å–∏–Ω–∏–º —Ü–≤–µ—Ç–æ–º -->
              <!-- –î–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –Ω–µ–≥–æ* –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è div-message-id = message.id-->
                <!-- *—Å–µ–π—á–∞—Å –æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—Ç–ø—Ä–∞–≤–∏–≤—à–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–µ -->
            <div div-message-id = "{{message.id}}" class="row mb-3  
              {% if user.username == message.to_user.username %} 
                bg-primary rounded-3 
              {% endif %}" >

              <!-- –ê–í–ê–¢–ê–† –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–ø—Ä–∞–≤–∏–≤—à–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ -->
              <div class="col-auto" >
                <img 
                  {% if message.is_anonim %}
                    src="{% static 'img/avatar/anonim.png' %}"
                    onclick= "message_to_user_set('–ò–Ω–∫–æ–≥–Ω–∏—Ç–æ'); return false;" 
                  {% else %}
                    src="{{message.from_user.avatar_pic.url}}"
                    name= "{{message.from_user.username}}"
                    onclick= "message_to_user_set(this.getAttribute('name')); return false;" 
                  {% endif %}
                    class="image-from"  alt="From">
                  <!-- –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –Ω–µ–≥–æ –≤ –æ–±—â–µ–º —á–∞—Ç–µ-->
              </div>
              
              <!-- –°–û–û–ë–©–ï–ù–ò–ï –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è--> 
              <div class="col">

                <!-- –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Ç–µ–∫—É—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, —Ç–æ  —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è —Å–∏–Ω–∏–º —Ü–≤–µ—Ç–æ–º ------- -->
                <div                    
                {% if user.username == message.from_user.username %}
                  class="p-3 shadow-sm rounded-3  message-wrapper bg-primary"                      
                {% else %} 
                  class="p-3 shadow-sm rounded-3  message-wrapper"                       
                {% endif %}
                  onclick="showContextMenu(event, 'menu-{{ message.id }}')"> <!-- –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –º–µ–Ω—é –£–î–ê–õ–ò–¢–¨ –û–¢–í–ï–¢–ò–¢–¨-->   
                  
                  <div
                  {% if message.is_anonim %}
                    class="text-muted small user-name-in-chat"> –ò–Ω–∫–æ–≥–Ω–∏—Ç–æ
                  {% else %}
                    class="text-muted small user-name-in-chat" > {{message.from_user.username}}
                  {% endif %} 

                  <!-- –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                  {% if message.to_user != NULL%}
                  –¥–ª—è {{message.to_user.username}} 
                  {% endif %}
                  </div>

                  <!-- –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π -->
                  {% if message.picture != "" %}
                  <div class="picture-in-message">
                     <img  src = "{{ message.picture.url }}"  alt="picture">
                  </div>
                  {% endif %}
                  
                  <!-- —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è -->
                  <div>{{message}}</div>
                  
                  <!-- –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è -->
                  <div class="text-end text-muted small mt-2">{{message.time_send}}</div>
                  
                  <!-- –≤—Å–ø–ª—ã–≤–∞–µ—é—â–µ–µ –º–µ–Ω—é –£–¥–∞–ª–∏—Ç—å (–µ—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Ç–µ–∫—É—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º) –∏–ª–∏ –û—Ç–≤–µ—Ç–∏—Ç—å-->
                  <div class="message-context-menu" id="menu-{{ message.id }}">
                    {% if user.username == message.from_user.username %}
                    <button onclick="deleteMessage('{{ message.id }}' )">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                    {% endif %}
                    <button onclick="replyToMessage('{{ message.from_user.username }}')">‚Ü©Ô∏è –û—Ç–≤–µ—Ç–∏—Ç—å</button>
                  </div>



                </div>
                <!--  --------------------------------------------------------------------------------------------  -->

              </div> <!-- /div class="col" -->
            </div> <!-- /div div-message-id = "{{message.id}}" class="row mb-3 ... -->

            {% endfor %}

          </div> <!-- /div class="col py-3" style="background-color: black;" id = "div-all-messages-in-chat" -->
        </div> <!-- /div class="row flex-grow-1 overflow-y-auto" style="background-color: black;" -->
        <!-- –ö–æ–Ω–µ—Ü –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π -->




        <!-- –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è  -->
        <form class="input-group mt-3" method="post" id="chatForm" enctype="multipart/form-data"> <!-- –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è  -->
          {% csrf_token %}
          
          <div class="row bg-black border-top py-3 " style="padding-right: 0;">

            <!-- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
            <div class ="row">
              <div class = "col">                       
                <img src="" id="preview" style="display: none;" alt="Preview" class = "preview-img">
              </div>
            </div>

            <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (–º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)-->
            <div class="row">
              <div class="col">
                <input hidden="true" type="text"  id="input-message-to-username" name="message_to">
                <span id="message-to-username" >  </span> <span id="unset-message-to-username" 
                  style="cursor: pointer;" onclick="message_to_user_unset(); return false;"></span>
              </div>
            </div>
            
            <!-- —Ç–µ–≥ DIV —Å–ª–∏–≤–∞–µ—Ç—Å—è —Å —Ç–µ–≥–æ–º INPUT-->
            <div class="row row-like-input">
              <div class="col">    
                <div class="input-group  div-like-input" >
                  <img src="{% static 'img/system/upload_image.png' %}"  alt="upimg"  onclick ="upload_image()" class="upload-image-icon" >
                  <!-- –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –µ—Å–ª–∏ –µ—Å—Ç—å-->
                  <input type="file" id="fileInput"   name="image"   accept="image/*"   hidden  onchange="previewImage(this); ">
                
                  <!-- <label for="input_message">–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:</label> -->
                  <input type="text" name ="message" class="form-control " placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." aria-label="message">
                  <button class="btn btn-primary" type="submit">     
                    <img src="{% static 'img/system/send_mail.png' %}"  width="30" height="30" alt="send">
                  </button>
                </div>
              </div>
            </div>
            
            <!-- –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ-->
            <div class="row">
              <div class ="col">
                <input type="checkbox" name="is_anonim"  value="true" aria-label="message"><i> –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ</i>
              </div>
            </div>
            
          </div>

        </form>
  
      </div> <!-- /div class="container-fluid vh-100 d-flex flex-column" -->
    </div> <!-- /div class="col-12 col-md-4" -->
    <!--–ö–û–ù–ï–¶ –ö–æ–ª–æ–Ω–∫–∞ —á–∞—Ç–∞-->
                   
                   

  </div> <!-- /div class="row" --> 
  <!--–ö–û–ù–ï–¶ –û–°–ù–û–í–ù–ê–Ø —Å—Ç—Ä–æ–∫–∞-->
                
</div> <!-- /div class="container-fluid"-->
<!-- –ö–û–ù–ï–¶ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã -->





<!-- *** –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ü–∏—Ñ—Ä –≤ –∑–∞–≥–∞–¥—ã–≤–∞–µ–º–æ–º —á–∏—Å–ª–µ (–æ—Ç 3 –¥–æ 6) *** -->
<div class="modal fade" id="numberModal" tabindex="-1" aria-labelledby="numberModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="numberModalLabel">–í—ã–±–µ—Ä–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 3 –¥–æ 6</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
      </div>
      <div class="modal-body">
        <div class="number-selector">
            <div class="arrow-button" id="increaseButton">‚ñ≤</div>
            <div class="number-display" id="numberDisplay">3</div>
            <div class="arrow-button" id="decreaseButton">‚ñº</div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" class="btn btn-primary" id="confirmButton">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
      </div>
    </div>
  </div>
</div>


</body>

<!-- // –≤ cowandbull_choose_number_length.js –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∏–∑ URL
function getQueryParam(param) 
 -->
<script src="{% static 'js/cowandbull_choose_number_length.js' %}"></script>
<script src="{% static 'js/messenger.js' %}"></script>
<script src="{% static 'js/cowandbull.js' %}"></script>



<!-- <script src="{% static 'js/display.js' %}"></script> -->
<!-- <script src="{% static 'js/function.js' %}"></script> -->
<!-- <script src="{% static 'js/script.js' %}"></script> -->
<!-- <script src="{% static 'js/events.js' %}"></script> -->


{% endblock %}